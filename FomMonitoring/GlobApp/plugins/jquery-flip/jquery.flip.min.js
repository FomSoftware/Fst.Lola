/*! flip - v1.1.2 - 2016-10-20
* https://github.com/nnattawat/flip
* Copyright (c) 2016 Nattawat Nonsung; Licensed MIT */
(function(n){var i=function(){var n,i=document.createElement("fakeelement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(n in t)if(i.style[n]!==undefined)return t[n]},t=function(t,i,r){this.setting={axis:"y",reverse:!1,trigger:"click",speed:500,forceHeight:!1,forceWidth:!1,autoSize:!0,front:".front",back:".back"};this.setting=n.extend(this.setting,i);typeof i.axis=="string"&&(i.axis.toLowerCase()==="x"||i.axis.toLowerCase()==="y")&&(this.setting.axis=i.axis.toLowerCase());typeof i.reverse=="boolean"&&(this.setting.reverse=i.reverse);typeof i.trigger=="string"&&(this.setting.trigger=i.trigger.toLowerCase());var u=parseInt(i.speed);isNaN(u)||(this.setting.speed=u);typeof i.forceHeight=="boolean"&&(this.setting.forceHeight=i.forceHeight);typeof i.forceWidth=="boolean"&&(this.setting.forceWidth=i.forceWidth);typeof i.autoSize=="boolean"&&(this.setting.autoSize=i.autoSize);(typeof i.front=="string"||i.front instanceof n)&&(this.setting.front=i.front);(typeof i.back=="string"||i.back instanceof n)&&(this.setting.back=i.back);this.element=t;this.frontElement=this.getFrontElement();this.backElement=this.getBackElement();this.isFlipped=!1;this.init(r)};n.extend(t.prototype,{flipDone:function(n){var t=this;t.element.one(i(),function(){t.element.trigger("flip:done");t.frontElement.css("backface-visibility","");t.backElement.css("backface-visibility","");typeof n=="function"&&n.call(t.element)})},flip:function(n){if(!this.isFlipped){this.isFlipped=!0;var t="rotate"+this.setting.axis;this.frontElement.css({transform:t+(this.setting.reverse?"(-180deg)":"(180deg)"),"backface-visibility":"hidden","z-index":"0"});this.backElement.css({transform:t+"(0deg)","z-index":"1"});this.flipDone(n)}},unflip:function(n){if(this.isFlipped){this.isFlipped=!1;var t="rotate"+this.setting.axis;this.frontElement.css({transform:t+"(0deg)","z-index":"1"});this.backElement.css({transform:t+(this.setting.reverse?"(180deg)":"(-180deg)"),"backface-visibility":"hidden","z-index":"0"});this.flipDone(n)}},getFrontElement:function(){return this.setting.front instanceof n?this.setting.front:this.element.find(this.setting.front)},getBackElement:function(){return this.setting.back instanceof n?this.setting.back:this.element.find(this.setting.back)},init:function(n){var t=this,i=t.frontElement.add(t.backElement),u="scale"+(t.setting.axis==="X"?"Y":"X"),f=t.element["outer"+(u==="rotatex"?"Height":"Width")]()*2,e={perspective:f,position:"relative"},o={transform:u+"(-1)","z-index":"0",position:"relative"},r={"transform-style":"preserve-3d",position:"absolute","z-index":"1"};t.setting.forceHeight?i.outerHeight(t.element.height()):t.setting.autoSize&&(r.height="100%");t.setting.forceWidth?i.outerWidth(t.element.width()):t.setting.autoSize&&(r.width="100%");i.css(r);t.element.css(e);t.backElement.css(o);setTimeout(function(){var r=t.setting.speed/1e3||.5;i.css({transition:"all "+r+"s ease-out"});typeof n=="function"&&n.call(t.element)},50);t.attachEvents()},clickHandler:function(t){(t||(t=window.event),this.element.find(n(t.target).closest('button, a, input[type="submit"]')).length)||(this.isFlipped?this.unflip():this.flip())},hoverHandler:function(){var t=this;t.element.off("mouseleave.flip");t.flip();setTimeout(function(){t.element.on("mouseleave.flip",n.proxy(t.unflip,t));t.element.is(":hover")||t.unflip()},t.setting.speed+150)},attachEvents:function(){var t=this;if(t.setting.trigger==="click")t.element.on(n.fn.tap?"tap.flip":"click.flip",n.proxy(t.clickHandler,t));else if(t.setting.trigger==="hover"){t.element.on("mouseenter.flip",n.proxy(t.hoverHandler,t));t.element.on("mouseleave.flip",n.proxy(t.unflip,t))}},flipChanged:function(n){this.element.trigger("flip:change");typeof n=="function"&&n.call(this.element)},changeSettings:function(n,t){var i=this,u=!1,r,e,f;n.axis!==undefined&&i.setting.axis!==n.axis.toLowerCase()&&(i.setting.axis=n.axis.toLowerCase(),u=!0);n.reverse!==undefined&&i.setting.reverse!==n.reverse&&(i.setting.reverse=n.reverse,u=!0);u?(r=i.frontElement.add(i.backElement),e=r.css(["transition-property","transition-timing-function","transition-duration","transition-delay"]),r.css({transition:"none"}),f="rotate"+i.setting.axis,i.isFlipped?i.frontElement.css({transform:f+(i.setting.reverse?"(-180deg)":"(180deg)"),"z-index":"0"}):i.backElement.css({transform:f+(i.setting.reverse?"(180deg)":"(-180deg)"),"z-index":"0"}),setTimeout(function(){r.css(e);i.flipChanged(t)},0)):i.flipChanged(t)}});n.fn.flip=function(i,r){return typeof i=="function"&&(r=i),typeof i=="string"||typeof i=="boolean"?this.each(function(){var t=n(this).data("flip-model");i==="toggle"&&(i=!t.isFlipped);i?t.flip(r):t.unflip(r)}):this.each(function(){if(n(this).data("flip-model")){var u=n(this).data("flip-model");i&&(i.axis!==undefined||i.reverse!==undefined)&&u.changeSettings(i,r)}else n(this).data("flip-model",new t(n(this),i||{},r))}),this}})(jQuery);